<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ESP32-P4 Web Flasher</title>
    <style>
      :root {
        color-scheme: light;
      }
      body {
        font-family: "Segoe UI", Tahoma, Arial, sans-serif;
        margin: 24px;
        color: #1f2328;
      }
      h1 {
        margin: 0 0 12px 0;
        font-size: 24px;
      }
      .note {
        font-size: 13px;
        color: #57606a;
        margin-bottom: 16px;
      }
      .grid {
        display: grid;
        grid-template-columns: 220px 1fr;
        gap: 10px 16px;
        align-items: center;
        max-width: 820px;
      }
      .row {
        margin: 10px 0;
      }
      .actions {
        display: flex;
        gap: 12px;
        margin: 16px 0;
      }
      button {
        padding: 8px 14px;
        border: 1px solid #d0d7de;
        background: #f6f8fa;
        border-radius: 6px;
        cursor: pointer;
      }
      button:disabled {
        cursor: not-allowed;
        opacity: 0.6;
      }
      input[type="text"],
      input[type="number"],
      select {
        padding: 6px 8px;
        border: 1px solid #d0d7de;
        border-radius: 6px;
        width: 100%;
      }
      textarea {
        width: 100%;
        height: 220px;
        border: 1px solid #d0d7de;
        border-radius: 6px;
        padding: 8px;
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
        font-size: 12px;
        resize: vertical;
      }
    </style>
  </head>
  <body>
    <h1>ESP32-P4 Web Flasher</h1>
    <div class="note">
      This page uses Web Serial and works only on Chromium-based browsers (Chrome, Edge). Serve it over
      <strong>https</strong> or <strong>http://localhost</strong>.
    </div>

    <div class="grid">
      <label for="binSelect">BIN file (from webLoader)</label>
      <select id="binSelect">
        <option value="ESP32-P4_Function_EV_Board.bin">ESP32-P4_Function_EV_Board.bin</option>
      </select>

      <label for="binFile">Or browse local BIN</label>
      <input id="binFile" type="file" accept=".bin" />

      <label for="flashOffset">Flash offset (hex)</label>
      <input id="flashOffset" type="text" value="0x0" />

      <label for="baudRate">Baud rate</label>
      <select id="baudRate">
        <option value="115200">115200</option>
        <option value="460800">460800</option>
        <option value="921600" selected>921600</option>
        <option value="1500000">1500000</option>
      </select>
    </div>

    <div class="actions">
      <button id="connectBtn">Connect</button>
      <button id="flashBtn" disabled>Flash</button>
      <button id="disconnectBtn" disabled>Disconnect</button>
    </div>

    <div class="row">
      <textarea id="log" readonly></textarea>
    </div>

    <script type="module" src="./app.js"></script>
  </body>
</html>
